language: cpp
install:
  - mkdir ~/pyston_deps

  - sudo apt-get install libgmp-dev libmpfr-dev libmpc-dev make build-essential libtool zip gcc-multilib autogen libncurses5-dev zlib1g-dev

  - wget -O ~/pyston_deps/gcc-4.8.2.tar.bz2 'http://www.netgull.com/gcc/releases/gcc-4.8.2/gcc-4.8.2.tar.bz2'
  - "cd ~/pyston_deps && tar -xjf gcc-4.8.2.tar.bz2"
  - "mkdir ~/pyston_deps/gcc-4.8.2-{build,install}"
  - "cd ~/pyston_deps/gcc-4.8.2-build && ../gcc-4.8.2/configure --prefix=$HOME/pyston_deps/gcc-4.8.2-install"
  - "cd ~/pyston_deps/gcc-4.8.2-build && make -j4",
  - "cd ~/pyston_deps/gcc-4.8.2-build && make check",
  - "cd ~/pyston_deps/gcc-4.8.2-build && make install",

  - git clone https://github.com/llvm-mirror/llvm.git ~/pyston_deps/llvm-trunk
  - git clone https://github.com/llvm-mirror/clang.git ~/pyston_deps/llvm-trunk/tools/clang

  - "cd ~/pyston_deps/llvm-trunk && make llvm_up && make llvm_configure && make llvm -j4"
script:
  - make test -j4
