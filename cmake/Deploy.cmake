if(DEPLOY)
  set(CPACK_PACKAGE_NAME "Pyston")
  set(CPACK_PACKAGE_VERSION "0.3")
  set(CPACK_PACKAGE_VENDOR "Dropbox")
  set(CPACK_PACKAGE_CONTACT "Kevin Modzelewski <kmod@dropbox.com>")
  set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Python implementation built using LLVM and JIT techniques")
  set(CPACK_DEBIAN_PACKAGE_DESCRIPTION "Pyston targets Python 2.7, only runs on x86_64 platforms.")

  set(CPACK_RESOURCE_FILE_LICENSE "${CMAKE_SOURCE_DIR}/LICENSE")
  set(CPACK_RESOURCE_FILE_README "${CMAKE_SOURCE_DIR}/README.md")
  set(CPACK_INSTALL_PREFIX "${CMAKE_INSTALL_PREFIX}")

  set(CPACK_OUTPUT_FILE_PREFIX "${CPACK_PACKAGE_NAME}_pkg")
  set(CPACK_PACKAGE_RELOCATABLE true)
  set(CPACK_MONOLITHIC_INSTALL true)

  # Debug/Nightly release
  set(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}")
  if(NIGHTLY)
    #execute_process(COMMAND "date +%Y.%m.%d" OUTPUT_VARIABLE NIGHTLY_DATE)
    execute_process(COMMAND "git rev-parse --short origin/master..HEAD ${CMAKE_SOURCE_DIR}" OUTPUT_VARIABLE NIGHTLY_DATE)
    set(CPACK_PACKAGE_VERSION "${NIGHTLY_DATE}")
    set(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_FILE_NAME}-nightly")
  endif()
  if(CMAKE_BUILD_TYPE MATCHES "Debug")
    set(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_FILE_NAME}-dbg")
  endif()

  # default package generators
  if(APPLE)
    set(PACKAGE_GENERATOR "PackageMaker")
    set(PACKAGE_SOURCE_GENERATOR "TGZ;ZIP")
  elseif(UNIX)
    set(PACKAGE_GENERATOR "DEB;RPM")
    set(PACKAGE_SOURCE_GENERATOR "TGZ;ZIP")
  else()
    set(PACKAGE_GENERATOR "ZIP")
    set(PACKAGE_SOURCE_GENERATOR "ZIP")
  endif()

  # used package generators
  set (CPACK_GENERATOR "${PACKAGE_GENERATOR}" CACHE STRING "List of binary package generators (CPack).")
  set (CPACK_SOURCE_GENERATOR "${PACKAGE_SOURCE_GENERATOR}" CACHE STRING "List of source package generators (CPack).")
  mark_as_advanced (CPACK_GENERATOR CPACK_SOURCE_GENERATOR)

  # Mac OS X package
  if(CPACK_GENERATOR MATCHES "PackageMaker|DragNDrop")
    set(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_FILE_NAME}-${CPACK_PACKAGE_VERSION}")
    #set(CPACK_PACKAGING_INSTALL_PREFIX /usr/local)
    set(CPACK_PACKAGING_INSTALL_PREFIX /opt)
  # Debian package
  elseif(CPACK_GENERATOR MATCHES "DEB")
    #set(CPACK_DEBIAN_PACKAGE_DEPENDS "")
    set(CPACK_DEBIAN_PACKAGE_SECTION "python")
    set(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
    set(CPACK_DEBIAN_PACKAGE_HOMEPAGE "http://pyston.org")
    #set(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
    set(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_FILE_NAME}-${CPACK_PACKAGE_VERSION}-${CMAKE_SYSTEM_PROCESSOR}")
  # RPM package
  elseif(CPACK_GENERATOR MATCHES "RPM")
    #set(CPACK_RPM_PACKAGE_REQUIRES "")
    set(CPACK_RPM_PACKAGE_GROUP "Development/Languages")
    set(CPACK_RPM_PACKAGE_LICENSE "Apache License 2.0")
    set(CPACK_RPM_PACKAGE_URL "http://pyston.org")
    #set(CPACK_RPM_PACKAGE_ARCHITECTURE "x86_64")
    set(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_FILE_NAME}-${CPACK_PACKAGE_VERSION}-${CMAKE_SYSTEM_PROCESSOR}")
  endif()
  include(CPack)
endif()
